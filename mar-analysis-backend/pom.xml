<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>mar.analysis.backend</groupId>
  <artifactId>mar-analysis-backend</artifactId>
  <version>0.1</version>
  <packaging>${packaging}</packaging>

	<parent>
		<groupId>ml2.mar</groupId>
		<artifactId>mar-main</artifactId>
		<version>1.0-SNAPSHOT</version>
	</parent>

  <properties>
    <packaging>jar</packaging>
    <jdk.version>11</jdk.version>
    <release.version>11</release.version>
    <micronaut.version>3.3.0</micronaut.version>
    <exec.mainClass>mar.analysis.backend.Application</exec.mainClass>
    <micronaut.runtime>netty</micronaut.runtime>
  </properties>

  <repositories>
	    <repository>
	      <id>central</id>
	      <url>https://repo.maven.apache.org/maven2</url>
	    </repository>

	      <!-- Should go way when the MAR repository below is gone away -->
	      <repository>
		<id>atl</id>
		<name>Eclipse ATL repository</name>
		<url>https://repo.eclipse.org/content/repositories/atl-releases/</url>
	      </repository>
	    
		<repository>
			<id>project.local</id>
			<name>project</name>
			<url>file:${project.basedir}/../../mar</url>
		</repository>
  </repositories>

  <dependencies>
		<dependency>
			<groupId>ml2.mar</groupId>
			<artifactId>mar-modelling-transformations</artifactId>
			<version>1.0-SNAPSHOT</version>
		</dependency>
			
		<dependency>
			<groupId>ml2.mar</groupId>
			<artifactId>mar-modelling</artifactId>
			<version>1.0-SNAPSHOT</version>
		</dependency>
	
		<dependency>
			<groupId>com.google.guava</groupId>
			<artifactId>guava</artifactId>
			<version>30.0-jre</version>
		</dependency>

		<dependency>
			<groupId>org.xerial</groupId>
			<artifactId>sqlite-jdbc</artifactId>
			<version>3.32.3.2</version>
			<scope>runtime</scope>
		</dependency>	

		<dependency>
			<groupId>com.github.spotbugs</groupId>
			<artifactId>spotbugs-annotations</artifactId>
			<version>4.0.1</version>
			<scope>compile</scope>
		</dependency>
		  
		<!-- https://mvnrepository.com/artifact/org.agrona/agrona -->
		<dependency>
		    <groupId>org.agrona</groupId>
		    <artifactId>agrona</artifactId>
		    <version>1.15.0</version>
		</dependency>

		<!-- When this project is fully integrated with MAR (with the same parent pom), this should come from mar-modelling-transformations -->
		<dependency>
			<groupId>anatlyzer</groupId>
			<artifactId>anatlyzer-bundle</artifactId>
			<version>0.8.0</version>
		</dependency>

		<dependency>
		  <groupId>org.eclipse.m2m.atl</groupId>
		  <artifactId>org.eclipse.m2m.atl.core.emf</artifactId>
		  <version>4.5.0</version>
		</dependency>

		<dependency>
		  <groupId>org.eclipse.m2m.atl</groupId>
		  <artifactId>org.eclipse.m2m.atl.dsls</artifactId>
		  <version>4.5.0</version>
		</dependency>

		<dependency>
		  <groupId>org.eclipse.m2m.atl</groupId>
		  <artifactId>org.eclipse.m2m.atl.engine</artifactId>
		  <version>4.5.0</version>
		</dependency>
		
		
    <dependency>
      <groupId>io.micronaut</groupId>
      <artifactId>micronaut-inject</artifactId>
      <version>${micronaut.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>io.micronaut</groupId>
      <artifactId>micronaut-validation</artifactId>
      <version>${micronaut.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter-api</artifactId>
      <version>5.8.2</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter-engine</artifactId>
      <version>5.8.2</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>io.micronaut.test</groupId>
      <artifactId>micronaut-test-junit5</artifactId>
      <version>${micronaut.version}</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>io.micronaut</groupId>
      <artifactId>micronaut-http-client</artifactId>
      <version>${micronaut.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>io.micronaut</groupId>
      <artifactId>micronaut-http-server-netty</artifactId>
      <version>${micronaut.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>io.micronaut</groupId>
      <artifactId>micronaut-jackson-databind</artifactId>
      <version>${micronaut.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>io.micronaut</groupId>
      <artifactId>micronaut-runtime</artifactId>
      <version>${micronaut.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>jakarta.annotation</groupId>
      <artifactId>jakarta.annotation-api</artifactId>
      <version>2.1.0</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>ch.qos.logback</groupId>
      <artifactId>logback-classic</artifactId>
      <version>1.2.11</version>
      <scope>runtime</scope>
    </dependency>
  </dependencies>

  <build>
		<resources>
			<resource>
				<directory>src/main/resources</directory>
			</resource>
		</resources>
  
    <plugins>
      <plugin>
        <groupId>io.micronaut.build</groupId>
        <artifactId>micronaut-maven-plugin</artifactId>
      </plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.8.0</version>
				<configuration>
					<release>11</release>
				</configuration>
			</plugin>
      
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <!-- Uncomment to enable incremental compilation -->
          <!-- <useIncrementalCompilation>false</useIncrementalCompilation> -->

          <annotationProcessorPaths combine.children="append">
            <path>
              <groupId>io.micronaut</groupId>
              <artifactId>micronaut-http-validation</artifactId>
              <version>${micronaut.version}</version>
            </path>
          </annotationProcessorPaths>
          <compilerArgs>
            <arg>-Amicronaut.processing.group=mar.analysis.backend</arg>
            <arg>-Amicronaut.processing.module=mar-analysis-backend</arg>
          </compilerArgs>
        </configuration>
      </plugin>
    </plugins>
  </build>

</project>
